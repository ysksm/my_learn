# チケット管理アプリ - 要件定義

## プロジェクト概要

DDD（ドメイン駆動設計）、レイヤードアーキテクチャ、依存性逆転原則（DIP）、依存性注入（DI）を適用したチケット管理アプリケーション。

## 技術スタック

- **フロントエンド**: React 19.1.1 + TypeScript
- **状態管理**: Jotai
- **ビルドツール**: Vite (rolldown-vite 7.1.14)
- **アーキテクチャパターン**: DDD + レイヤードアーキテクチャ
- **設計原則**: SOLID原則（特にDIP）、DI

## 機能要件

### 1. チケット管理機能

#### 1.1 チケット一覧表示
- すべてのチケットを一覧表示
- ステータス別（TODO / IN_PROGRESS / DONE）にフィルタリング可能
- チケットの基本情報（タイトル、ステータス、作成日時、更新日時）を表示

#### 1.2 チケット作成
- タイトル（必須、1-100文字）
- 説明（任意、最大500文字）
- 初期ステータスはTODO
- 作成日時・更新日時は自動設定

#### 1.3 チケット更新
- ステータス変更（TODO → IN_PROGRESS → DONE）
- タイトル・説明の編集

#### 1.4 チケット削除
- チケットの削除機能
- 削除確認ダイアログの表示

### 2. リアルタイム更新機能

#### 2.1 ポーリング仕様
- **更新間隔**: 5秒
- **対象**: チケット一覧データ
- **動作**:
  - コンポーネントマウント時にポーリング開始
  - コンポーネントアンマウント時にポーリング停止
  - エラー発生時も継続（エラーログ出力）

#### 2.2 状態同期
- ポーリングで取得したデータをJotai atomに自動反映
- UIは自動的に再レンダリング

### 3. UI/UX要件

#### 3.1 レスポンシブデザイン
- モバイル・タブレット・デスクトップに対応

#### 3.2 ユーザーフィードバック
- ローディング状態の表示
- 成功・エラーメッセージの表示
- 楽観的UI更新（即座にUI反映、バックグラウンドで同期）

## 非機能要件

### 1. パフォーマンス
- 初回レンダリング: 1秒以内
- ポーリング処理: UIをブロックしない
- 100件のチケットを快適に表示

### 2. 保守性
- レイヤー間の疎結合を維持
- 依存性の方向: Presentation → Application → Domain
- Infrastructureは各層に依存を注入
- テストしやすい構造

### 3. 拡張性
- データソースの切り替えが容易（モック → API → データベース）
- 新しいユースケースの追加が容易
- UIコンポーネントの再利用性

## データモデル

### Ticket（チケットエンティティ）

```typescript
interface Ticket {
  id: string;           // UUID
  title: string;        // 1-100文字
  description: string;  // 0-500文字
  status: TicketStatus; // TODO | IN_PROGRESS | DONE
  createdAt: Date;      // 作成日時
  updatedAt: Date;      // 更新日時
}
```

### TicketStatus（ステータスバリューオブジェクト）

```typescript
enum TicketStatus {
  TODO = 'TODO',
  IN_PROGRESS = 'IN_PROGRESS',
  DONE = 'DONE'
}
```

## 制約事項

### 1. データ永続化
- 初期実装はメモリ内データストア（インメモリリポジトリ）
- ページリロードでデータはリセット
- 将来的にLocalStorage/API連携に拡張可能

### 2. 認証・認可
- 初期実装では未実装
- すべてのユーザーが全チケットにアクセス可能

### 3. 並行制御
- 楽観的ロック・悲観的ロックは未実装
- 最後の更新が優先（Last Write Wins）

## 開発スコープ

### Phase 1（今回の実装）
- ✅ DDDベースのドメインモデル設計
- ✅ レイヤードアーキテクチャの構築
- ✅ DIコンテナの実装
- ✅ CRUD操作の実装
- ✅ Jotaiによる状態管理
- ✅ ポーリング機能の実装
- ✅ 基本的なUIコンポーネント

### Phase 2（将来の拡張）
- ⬜ LocalStorageによるデータ永続化
- ⬜ REST API連携
- ⬜ ユニットテスト・統合テスト
- ⬜ エラーバウンダリ
- ⬜ 認証・認可機能

## 成功基準

1. DDDの戦術的パターン（Entity, Value Object, Repository）が正しく適用されている
2. 各レイヤーが明確に分離され、依存性の方向が一方向
3. DIによって実装を容易に切り替え可能
4. ポーリングによって5秒ごとにデータが更新される
5. Jotaiによって効率的に状態管理されている
6. チケットのCRUD操作がすべて動作する
