# ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

## æ¦‚è¦

ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯ã€Todoã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è¨­è¨ˆã«é–¢ã™ã‚‹åŒ…æ‹¬çš„ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

---

## ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸€è¦§

### ğŸ“š ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ¥ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | å†…å®¹ |
|------------|------|
| [overview.md](./overview.md) | ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å…¨ä½“ã®æ¦‚è¦ã€ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹é€ ã€è¨­è¨ˆåŸå‰‡ |
| [domain-layer.md](./domain-layer.md) | Domainå±¤ã®è©³ç´°ï¼ˆEntity, Value Object, Repository Interfaceï¼‰ |
| [application-layer.md](./application-layer.md) | Applicationå±¤ã®è©³ç´°ï¼ˆUse Cases, DI Containerï¼‰ |
| [infrastructure-layer.md](./infrastructure-layer.md) | Infrastructureå±¤ã®è©³ç´°ï¼ˆLocalStorageå®Ÿè£…ã€è¤‡æ•°ã‚¿ãƒ–åŒæœŸï¼‰ |
| [presentation-layer.md](./presentation-layer.md) | Presentationå±¤ã®è©³ç´°ï¼ˆReact Components, Hooks, Pollingï¼‰ |

### ğŸ“Š è¨­è¨ˆå›³

| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | å†…å®¹ |
|------------|------|
| [class-diagram.md](./class-diagram.md) | ã‚¯ãƒ©ã‚¹å›³ï¼ˆå…¨ä½“æ§‹é€ ã€ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ¥ã€é–¢ä¿‚æ€§ï¼‰ |
| [sequence-diagrams.md](./sequence-diagrams.md) | ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ï¼ˆTodoå–å¾—ã€Todoæ›´æ–°ã€è¤‡æ•°ã‚¿ãƒ–åŒæœŸï¼‰ |

---

## æ¨å¥¨èª­ã¿é †

### 1. åˆã‚ã¦èª­ã‚€æ–¹

1. **[overview.md](./overview.md)** - ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å…¨ä½“ã‚’ç†è§£
2. **[class-diagram.md](./class-diagram.md)** - ã‚¯ãƒ©ã‚¹æ§‹é€ ã‚’è¦–è¦šçš„ã«æŠŠæ¡
3. **[sequence-diagrams.md](./sequence-diagrams.md)** - å‡¦ç†ãƒ•ãƒ­ãƒ¼ã‚’ç†è§£
4. å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆèˆˆå‘³ã®ã‚ã‚‹å±¤ã‹ã‚‰ï¼‰

### 2. ç‰¹å®šã®å±¤ã‚’ç†è§£ã—ãŸã„æ–¹

- **Domainå±¤ã‚’çŸ¥ã‚ŠãŸã„** â†’ [domain-layer.md](./domain-layer.md)
- **Use Caseã‚’çŸ¥ã‚ŠãŸã„** â†’ [application-layer.md](./application-layer.md)
- **ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ã‚’çŸ¥ã‚ŠãŸã„** â†’ [infrastructure-layer.md](./infrastructure-layer.md)
- **UIã¨ãƒãƒ¼ãƒªãƒ³ã‚°ã‚’çŸ¥ã‚ŠãŸã„** â†’ [presentation-layer.md](./presentation-layer.md)

### 3. å®Ÿè£…ã®æµã‚Œã‚’è¿½ã„ãŸã„æ–¹

1. **[sequence-diagrams.md](./sequence-diagrams.md)** - ãƒ•ãƒ­ãƒ¼ã‚’è¦–è¦šçš„ã«ç†è§£
2. **[domain-layer.md](./domain-layer.md)** - ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¨ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«
3. **[application-layer.md](./application-layer.md)** - ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã®å®Ÿè£…
4. **[infrastructure-layer.md](./infrastructure-layer.md)** - ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ã®ä»•çµ„ã¿
5. **[presentation-layer.md](./presentation-layer.md)** - UIã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ç‰¹å¾´

### ğŸ“ ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Presentation Layer          â”‚  UI, React Components
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ ä¾å­˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Application Layer           â”‚  Use Cases, DI Container
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ ä¾å­˜
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Domain Layer                â”‚  Business Logic
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†‘ å®Ÿè£…
             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Infrastructure Layer        â”‚  Data Persistence
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ¯ è¨­è¨ˆåŸå‰‡

- **ä¾å­˜æ€§é€†è»¢ã®åŸå‰‡ï¼ˆDIPï¼‰**: ä¸Šä½å±¤ãŒã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«ä¾å­˜ã€ä¸‹ä½å±¤ãŒå®Ÿè£…ã‚’æä¾›
- **ä¾å­˜æ€§æ³¨å…¥ï¼ˆDIï¼‰**: DIã‚³ãƒ³ãƒ†ãƒŠã§ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚’ç®¡ç†
- **å˜ä¸€è²¬ä»»ã®åŸå‰‡ï¼ˆSRPï¼‰**: å„ã‚¯ãƒ©ã‚¹ãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯1ã¤ã®è²¬å‹™ã®ã¿
- **ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ“ãƒªãƒ†ã‚£**: ã™ã¹ã¦ã®Domainã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ä¸å¤‰

### ğŸ”„ ãƒ‡ãƒ¼ã‚¿åŒæœŸ

- **ãƒãƒ¼ãƒªãƒ³ã‚°**: 5ç§’ã”ã¨ã«è‡ªå‹•æ›´æ–°
- **Storage Event**: ä»–ã®ã‚¿ãƒ–ã§ã®å¤‰æ›´ã‚’å³åº§ã«æ¤œçŸ¥
- **LocalStorage**: ãƒ–ãƒ©ã‚¦ã‚¶å†…ã§ã®ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–

---

## ä¸»è¦ãªãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³

| ãƒ‘ã‚¿ãƒ¼ãƒ³ | é©ç”¨ç®‡æ‰€ | ç›®çš„ |
|---------|---------|------|
| **Entity** | Todo | ãƒ“ã‚¸ãƒã‚¹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ |
| **Value Object** | Assignee | ä¸å¤‰ãªå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ |
| **Repository** | TodoRepository | ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹æŠ½è±¡åŒ– |
| **Use Case** | GetTodos, UpdateTodoStatus | ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ |
| **Dependency Injection** | Container | ç–çµåˆãªè¨­è¨ˆ |
| **Singleton** | Container | ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ç®¡ç† |
| **Immutability** | Domainå±¤å…¨ä½“ | ä¸å¤‰æ€§ã®ä¿è¨¼ |

---

## ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ 

```
docs/architecture/
â”œâ”€â”€ README.md                    # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼‰
â”œâ”€â”€ overview.md                  # ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦
â”œâ”€â”€ domain-layer.md              # Domainå±¤ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ application-layer.md         # Applicationå±¤ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ infrastructure-layer.md      # Infrastructureå±¤ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ presentation-layer.md        # Presentationå±¤ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ class-diagram.md             # ã‚¯ãƒ©ã‚¹å›³
â””â”€â”€ sequence-diagrams.md         # ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³
```

---

## ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰æ§‹é€ 

```
src/
â”œâ”€â”€ domain/                      # Domainå±¤
â”‚   â”œâ”€â”€ models/                 # Entity & Value Object
â”‚   â”‚   â”œâ”€â”€ Todo.ts            # Todoã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
â”‚   â”‚   â”œâ”€â”€ TodoStatus.ts      # çŠ¶æ…‹å‹å®šç¾©
â”‚   â”‚   â””â”€â”€ Assignee.ts        # æ‹…å½“è€…VO
â”‚   â””â”€â”€ repositories/           # Repository Interface
â”‚       â””â”€â”€ TodoRepository.ts   # ãƒªãƒã‚¸ãƒˆãƒªå¥‘ç´„
â”‚
â”œâ”€â”€ application/                 # Applicationå±¤
â”‚   â”œâ”€â”€ usecases/               # Use Cases
â”‚   â”‚   â”œâ”€â”€ GetTodosUseCase.ts
â”‚   â”‚   â”œâ”€â”€ UpdateTodoStatusUseCase.ts
â”‚   â”‚   â””â”€â”€ UpdateTodoAssigneeUseCase.ts
â”‚   â””â”€â”€ di/                     # DI Container
â”‚       â””â”€â”€ container.ts
â”‚
â”œâ”€â”€ infrastructure/              # Infrastructureå±¤
â”‚   â””â”€â”€ repositories/           # Repository Implementation
â”‚       â””â”€â”€ LocalStorageTodoRepository.ts
â”‚
â””â”€â”€ presentation/                # Presentationå±¤
    â”œâ”€â”€ components/             # React Components
    â”‚   â”œâ”€â”€ TodoList.tsx
    â”‚   â”œâ”€â”€ TodoItem.tsx
    â”‚   â””â”€â”€ AssigneeSelector.tsx
    â””â”€â”€ hooks/                  # Custom Hooks (äºˆå®š)
```

---

## ä¸»è¦ãƒ•ãƒ­ãƒ¼å›³è§£

### Todoå–å¾—ãƒ•ãƒ­ãƒ¼

```
User â†’ App.tsx â†’ GetTodosUseCase â†’ TodoRepository â†’ LocalStorage
                                                           â†“
User â† TodoList â† App.tsx â† [Todo[]] â† Repository â† æ–°ã—ã„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
```

### Todoæ›´æ–°ãƒ•ãƒ­ãƒ¼

```
User â†’ TodoItem â†’ UpdateTodoStatusUseCase â†’ TodoRepository â†’ LocalStorage
       â†“                                                           â†“
       onUpdate() â†’ fetchTodos() â†’ GetTodosUseCase â†’ UIæ›´æ–°
```

### è¤‡æ•°ã‚¿ãƒ–åŒæœŸãƒ•ãƒ­ãƒ¼

```
Tab A: User â†’ å¤‰æ›´ â†’ LocalStorageä¿å­˜ â†’ storage eventç™ºç«
                                              â†“
Tab B: Eventå—ä¿¡ â†’ fetchTodos() â†’ LocalStorageèª­ã¿è¾¼ã¿ â†’ UIæ›´æ–°
```

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| æŠ€è¡“ | ç”¨é€” |
|------|------|
| **React 19** | UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª |
| **TypeScript** | å‹å®‰å…¨æ€§ |
| **Vite (rolldown-vite)** | ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ« |
| **LocalStorage** | ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ– |
| **Storage API** | è¤‡æ•°ã‚¿ãƒ–åŒæœŸ |

---

## è¨­è¨ˆã®åˆ©ç‚¹

âœ… **ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£**: å„å±¤ã‚’ç‹¬ç«‹ã—ã¦ãƒ†ã‚¹ãƒˆå¯èƒ½
âœ… **ä¿å®ˆæ€§**: é–¢å¿ƒã®åˆ†é›¢ã«ã‚ˆã‚Šå¤‰æ›´ã®å½±éŸ¿ç¯„å›²ãŒé™å®šçš„
âœ… **æ‹¡å¼µæ€§**: æ–°æ©Ÿèƒ½è¿½åŠ ãŒå®¹æ˜“
âœ… **å¯èª­æ€§**: ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹é€ ãŒæ˜ç¢º
âœ… **å†åˆ©ç”¨æ€§**: Domainå±¤ã¨Applicationå±¤ã¯ä»–ã®UIã§ã‚‚åˆ©ç”¨å¯èƒ½
âœ… **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ€§**: ãƒãƒ¼ãƒªãƒ³ã‚° + Storage Eventã§å³åº§ã«åŒæœŸ

---

## å°†æ¥ã®æ‹¡å¼µ

### çŸ­æœŸï¼ˆã™ãã«è¿½åŠ å¯èƒ½ï¼‰

- Todoä½œæˆæ©Ÿèƒ½ï¼ˆCreateTodoUseCaseï¼‰
- Todoå‰Šé™¤æ©Ÿèƒ½ï¼ˆDeleteTodoUseCaseï¼‰
- ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½ï¼ˆçŠ¶æ…‹åˆ¥è¡¨ç¤ºï¼‰
- ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½ï¼ˆã‚¿ã‚¤ãƒˆãƒ«é †ã€çŠ¶æ…‹é †ï¼‰

### ä¸­æœŸ

- APIå®Ÿè£…ï¼ˆApiTodoRepositoryï¼‰
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å±¤ã®è¿½åŠ 
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å¼·åŒ–ï¼ˆãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥ï¼‰
- æ¥½è¦³çš„æ›´æ–°ï¼ˆOptimistic Updateï¼‰

### é•·æœŸ

- ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†
- IndexedDBå®Ÿè£…
- ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ
- WebSocketã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡

---

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [CLAUDE.md](../../CLAUDE.md) - Claude Codeç”¨ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
- [requirements.md](../requirements.md) - æ©Ÿèƒ½è¦ä»¶
- [technical-spec.md](../technical-spec.md) - æŠ€è¡“ä»•æ§˜
- [implementation-plan.md](../implementation-plan.md) - å®Ÿè£…è¨ˆç”»

---

## è²¢çŒ®è€…å‘ã‘

### æ–°ã—ã„UseCaseã®è¿½åŠ æ‰‹é †

1. `src/application/usecases/XxxUseCase.ts`ã‚’ä½œæˆ
2. ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§ãƒªãƒã‚¸ãƒˆãƒªã‚’å—ã‘å–ã‚‹
3. `execute()`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè£…
4. Presentationå±¤ã‹ã‚‰å‘¼ã³å‡ºã™

### æ–°ã—ã„ãƒªãƒã‚¸ãƒˆãƒªå®Ÿè£…ã®è¿½åŠ æ‰‹é †

1. `src/infrastructure/repositories/XxxRepository.ts`ã‚’ä½œæˆ
2. `TodoRepository`ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®Ÿè£…
3. `container.ts`ã§åˆ‡ã‚Šæ›¿ãˆ

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ›´æ–°

æ–°æ©Ÿèƒ½ã‚’è¿½åŠ ã—ãŸéš›ã¯ã€ä»¥ä¸‹ã‚’æ›´æ–°ã—ã¦ãã ã•ã„:
- è©²å½“ã™ã‚‹ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- ã‚¯ãƒ©ã‚¹å›³ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
- ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ï¼ˆä¸»è¦ãƒ•ãƒ­ãƒ¼ã®å ´åˆï¼‰
- ã“ã®README.md

---

## è³ªå•ãƒ»ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯

- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®Issuesã§è³ªå•ã—ã¦ãã ã•ã„
- ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«é–¢ã™ã‚‹ææ¡ˆã¯æ­“è¿ã—ã¾ã™
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ”¹å–„ææ¡ˆã‚‚ãŠå¾…ã¡ã—ã¦ã„ã¾ã™

---

æœ€çµ‚æ›´æ–°: 2025-11-03
